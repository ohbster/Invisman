{% set properties = entity_data['properties'] %}
{% if update_request %}
{% set row = entity_data['row'] %}
{% endif %}
<form id="entity_form" method="POST">
{% for key in entity_data['properties'] %}
  {% if key == 'id' %}
    {# If update, include the row id in fields, but mark as readonly. Otherwise, omit #}
    {% if update_request %}
      <p> {{ key }} = <input type= "text" readonly = true name = "{{ key }}" id="{{ key }}"/></p>
    {% endif %}
  {% elif properties[key] == "BOOLEAN" %}
  <p> {{ key }} = <select name="{{ key }}" id="{{ key }}">
    <option value='False'>False</option>
    <option value='True'>True</option>
  </select>

  {% elif properties[key] == "FLOAT" %}
  <p> {{ key }} = <input type="number" step=0.01 name="{{ key }}" id="{{ key }}" placeholder="Value greater than 0"/></p>
  {% elif properties[key] == "INTEGER" %}
  <p> {{ key }} = <input type="number" step=1 name="{{ key }}" id="{{ key }}" placeholder="Value greater than 0"/></p>
  {% elif key == "description" or key == "review" %}
  <p> {{ key }} = <textarea name="{{ key }}" id="{{ key }}" rows="4" cols="50"></textarea></p>
  {% else %}
  <p> {{ key }} = <input type= "text" name = "{{ key }}" id="{{ key }}"/></p>
  {% endif %}
{% endfor %}

{% if update_request %}
{# fill in values from row #}
<!-- autogenerated script -->
<script>
{% for key in properties %}
  document.forms['entity_form'].elements['{{ key }}'].value = '{{ row[key] }}';
{% endfor %}
</script>


{% endif %}

{# Draw buttons #}
{% if update_request %}
{# Update Request #}
    <p>
    <input type = "submit" value = "Update" formaction = "{{ entity_data['submit_route'] }}/{{ row['id'] }}"/>
    <input type = "button" value = "Close" onclick="location.href='{{ entity_data['cancel_route'] }}'" formmethod="get"/>
    <input type = "button" value = "Delete" onclick="location.href='{{ entity_data['delete_route'] }}/{{ row['id'] }}'" formmethod="get"/></p>
  </form>
{% else %}
{# Add request #}
    <p>
      <input type = "submit" value = "Submit" formaction = "{{entity_data['submit_route'] }}"/>
      <input type = "button" value = "Cancel" onclick="location.href='{{ entity_data['cancel_route'] }}'" formmethod="get"/>
    </p>

{% endif %}
